<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Base Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1e1e2f;
      color: #f0f0f0;
      padding: 2rem;
      text-align: center;
    }
    h1 {
      margin-bottom: 1rem;
    }
    input, select, button {
      padding: 0.6rem;
      margin: 0.5rem;
      border-radius: 5px;
      border: none;
      font-size: 1rem;
    }
    input, select {
      width: 200px;
    }
    button {
      background-color: #4caf50;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    #result {
      margin-top: 2rem;
      font-size: 1.2rem;
      color: #00ffcc;
    }
    .error {
      color: #ff5555;
    }
  </style>
</head>
<body>

  <h1>Base Converter</h1>

  <input type="text" id="inputNumber" placeholder="Enter number" />
  <input type="number" id="fromBase" placeholder="From base (2-36)" min="2" max="36"/>
  <select id="toBase">
    <!-- Populated via JS -->
  </select>
  <br />
  <button onclick="convertBase()">Convert</button>

  <div id="result"></div>

  <script>
  const toBaseSelect = document.getElementById('toBase');
  for (let i = 2; i <= 36; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.text = `Base ${i}`;
    toBaseSelect.appendChild(option);
  }

  function convertBase() {
    const input = document.getElementById('inputNumber').value.trim();
    const fromBase = parseInt(document.getElementById('fromBase').value);
    const toBase = parseInt(document.getElementById('toBase').value);
    const resultDiv = document.getElementById('result');

    try {
      if (!input || isNaN(fromBase) || isNaN(toBase)) {
        throw new Error("Please fill in all fields.");
      }
      if (fromBase < 2 || fromBase > 36 || toBase < 2 || toBase > 36) {
        throw new Error("Bases must be between 2 and 36.");
      }

      const converted = convertFullNumber(input, fromBase, toBase);
      resultDiv.innerHTML = `Converted value (base ${toBase}): <strong>${converted}</strong>`;
      resultDiv.className = '';
    } catch (err) {
      resultDiv.textContent = err.message;
      resultDiv.className = 'error';
    }
  }

  function convertFullNumber(input, fromBase, toBase) {
    let isNegative = input.startsWith("-");
    let [intPart, fracPart] = input.replace("-", "").split(".");

    // Convert integer part to decimal
    let intDecimal = parseInt(intPart, fromBase);
    if (isNaN(intDecimal)) throw new Error(`Invalid integer part in base ${fromBase}.`);

    // Convert fractional part to decimal
    let fracDecimal = 0;
    if (fracPart) {
      for (let i = 0; i < fracPart.length; i++) {
        const digit = parseInt(fracPart[i], fromBase);
        if (isNaN(digit)) throw new Error(`Invalid fractional digit '${fracPart[i]}' in base ${fromBase}.`);
        fracDecimal += digit / Math.pow(fromBase, i + 1);
      }
    }

    const totalDecimal = intDecimal + fracDecimal;
    const finalDecimal = isNegative ? -totalDecimal : totalDecimal;

    return convertDecimalToBase(finalDecimal, toBase);
  }

  function convertDecimalToBase(num, base) {
    const isNegative = num < 0;
    num = Math.abs(num);
    
    const intPart = Math.floor(num);
    let fracPart = num - intPart;

    const intStr = intPart.toString(base).toUpperCase();

    // Convert fractional part manually
    let fracStr = "";
    let precision = 10; // max digits after decimal
    while (fracPart > 0 && fracStr.length < precision) {
      fracPart *= base;
      let digit = Math.floor(fracPart);
      fracStr += digit.toString(base).toUpperCase();
      fracPart -= digit;
    }

    return (isNegative ? "-" : "") + intStr + (fracStr ? "." + fracStr : "");
  }
</script>


</body>
</html>
